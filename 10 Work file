
import numpy as np

import sys, math
from PyQt5.QtWidgets import QDialog, QApplication, QSlider
from PyQt5.QtWidgets import QFileDialog, QMessageBox
from PyQt5.QtGui import QCursor, QColor
from PyQt5.QtCore import Qt, QTimer
# from PyQt5.QtOpenGL import QGL, QGLFormat, QGLWidget
from tkinter import Tk
from tkinter.filedialog import askopenfilename
# name of file    has this in file
from HW_10 import Ui_Title

class Truss:
    def __init__(self, ):
        self.x0 = None
        self.y0 = None
        self.xf = None
        self.yf = None

class main_window(QDialog):

    def __init__(self):
        super(main_window, self).__init__()
        self.Truss = None
        self.ui = Ui_Title()
        self.ui.setupUi(self)
        self.assign_widgets()
        self.show()

    def assign_widgets(self):
        self.ui.fileopenbutton.clicked.connect(self.readTruss)
        self.ui.ExitButton.clicked.connect(self.exitapp)

    def readTruss(self):
        self.Truss = Truss() #create a truss object
        fileName = askopenfilename(filetypes=[('.txt file', "*.txt")], title="Truss File Selection")
        filetext = str(fileName)
        self.Truss.x0, self.Truss.y0, self.Truss.xf, self.Truss.yf = np.loadtxt(filetext,skiprows=1,unpack=True)
        self.ui.fileopenlocationtextbox.print(self,self.Truss.x0, self.Truss.y0, self.Truss.xf, self.Truss.yf)
        self.updateWindows()

    def updateWindows(self):
        self.ui.openGLWidget.update()
        self.ui.openGLWidgetTwo.update()

    def exitapp(self):
        app.exit()


if __name__ == "__main__":
    app = QApplication.instance()
    if not app:
        app = QApplication(sys.argv)
    app.aboutToQuit.connect(app.deleteLater)
    main_win = main_window()
    sys.exit(app.exec_())
